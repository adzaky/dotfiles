#!/bin/sh
# wayland desktop session runner

self=$(basename $0)

if ! grep -q run- <<<$self; then
    echo "symlink must start with 'run-'"
    echo "for example:"
    echo "ln -s /usr/bin/run-desktop /usr/bin/run-sway"
    exit 1
fi

desktop=${self##run-}

export XDG_SESSION_TYPE=wayland \
    XDG_CURRENT_DESKTOP=$desktop \
    XDG_SESSION_DESKTOP=$desktop

# Load user-specific environment variables
user_env="${XDG_CONFIG_HOME:-$HOME/.config}/wayland.env"
[ -f "$user_env" ] && . "$user_env"

exec dbus-run-session $desktop $@
