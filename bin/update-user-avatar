#!/usr/bin/env bash
img="$1"
if [ ! -f "$img" ]; then
    echo "Please specify a file"
    exit 1
fi

cp -vf "$img" "$HOME/.config/face.png"
chmod -v 644 "$HOME/.config/face.png"
ln -vsf "$HOME/.config/face.png" "$HOME/.face"
dbus-send --system --print-reply \
    --dest=org.freedesktop.Accounts \
    "/org/freedesktop/Accounts/User$(id -u)" \
    org.freedesktop.Accounts.User.SetIconFile "string:$img"
